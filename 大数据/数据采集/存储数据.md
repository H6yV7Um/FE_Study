# 存储数据

## 一、媒体文件

存储媒体文件有两种主要的方式：只获取文件 URL 链接，或者直接把源文件下载下来。你可以通过媒体文件所在的 URL 链接直接引用它。这样做的优点如下。

- 爬虫运行得更快，耗费的流量更少，因为只要链接，不需要下载文件。
- 可以节省很多存储空间，因为只需要存储URL链接就可以。
- 存储URL的代码更容易写，也不需要实现文件下载代码。
- 不下载文件能够降低目标主机服务器的负载。

也有一些缺点。

- 这些内嵌在你的网站或应用中的外站URL链接被称为盗链(hotlinking)，使用盗链可能会让你麻烦不断，每个网站都会实施防盗链措施。
- 因为你的链接文件在别人的服务器上，所以你的应用就要跟着别人的节奏运行了。
- 盗链是很容易改变的。如果你把盗链图片放在博客上，要是被对方服务器发现，很可能被恶搞。如果你把 URL 链接存起来准备以后再用，可能用的时候链接已经失效了，或者是变成了完全无关的内容。
- 现实中的网络浏览器不仅可以请求HTML页面并切换页面，它们也会下载访问页面上所有的资源。下载文件会让你的爬虫看起来更像是人在浏览网站，这样做反而有好处。

究竟是存储文件，还是只存储文件的 URL 链接，可以想想这些文件是要多次使用，还是放进数据库之后就只是等着“落灰”，再也不会被打开。

## 二、把数据存储到CSV

CSV(Comma-Separated Values，逗号分隔值)是存储表格数据的常用文件格式。Microsoft，Excel 和很多应用都支持 CSV 格式，因为它很简洁。下面就是一个 CSV 文件的例子:

```cvs
fruit,cost
apple,1.00
banana,0.30
pear,1.25
```

每一行都用一个换行符分隔， 列与列之间用逗号分隔(因此也叫“逗号分隔值”)。

网络数据采集的一个常用功能就是获取 HTML 表格并写入 CSV 文件。维基百科的文本编辑器对比词条(https://en.wikipedia.org/wiki/Comparison_of_text_editors)中用了许多复杂 的 HTML 表格，用到了颜色、链接、排序，以及其他在写入 CSV 文件之前需要忽略的 HTML 元素。

### 2.1实际工作中写此程序之前的注意事项

如果你有很多 HTML 表格，且每个都要转换成 CSV 文件，或者许多 HTML 表格都要 汇总到一个 CSV 文件，那么把这个程序整合到爬虫里以解决问题非常好。但是，如果你只需要做一次这种事情，那么更好的办法就是:复制粘贴。选择 HTML 表格内容然 后粘贴到 Excel 文件里，可以另存为 CSV 格式，不需要写代码就能搞定!

## 三、MySQL

MySQL(官方发音是“My es-kew-el”，但很多人都说成“My Sequel”)是目前最受欢迎的开源关系型数据库管理系统。一个开源项目具有如此之竞争力实在是令人意外，它的流行程度正在不断地接近另外两个闭源的商业数据库系统:微软的SQL Server和甲骨文的 Oracle 数据库(MySQL 在 2010 年被甲骨文收购)。

## 四、Email

与网页通过HTTP协议传输一样，邮件是通过SMTP(Simple Mail Transfer Protocol，简单邮件传输协议)传输的。而且，和你用网络服务器的客户端(浏览器)处理那些通过 HTTP 协议传输的网页一样，Email 服务器也有客户端，像 Sendmail、Postfix 和 Mailman 等，都可以收发邮件。
























