# 单例模式 Singleton

## 一、概述

单例模式的定义是：保证一个类仅有一个实例，并提供一个访问它的全局访问点。

单例模式是一种常用的模式，有一些对象我们往往只需要一个，比如线程池、全局缓存、浏
览器中的 window 对象等。在前端开发中，单例模式的用途同样非常广泛。试想一下，当我们单击登录按钮的时候，页面中会出现一个登录浮窗，而这个登录浮窗是唯一的，无论单击多少次登录按钮，这个浮窗都只会被创建一次，那么这个登录浮窗就适合用单例模式来创建。再简单来说，在人类当中，每一个人都是唯一的，每一个身份证都是唯一的。

介绍：

- **意图**：保证一个类仅有一个实例，并提供一个访问它的全局访问点。
- **主要解决**：一个全局使用的类频繁地创建与销毁。
- **何时使用**：当您想控制实例数目，节省系统资源的时候。
- **如何解决**：判断系统是否已经有这个单例，如果有则返回，如果没有则创建。
- **优点**： 
	- 1、在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例（比如管理学院首页页面缓存）。 
	- 2、避免对资源的多重占用（比如写文件操作）。
- **缺点**：没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。

## 二、注意

- 1、单例类只能有一个实例。
- 2、单例类必须自己创建自己的唯一实例。
- 3、单例类必须给所有其他对象提供这一实例。

## 三、运用

demo: 先创建一个Me.js

```js
class Me {
    constructor() {
        this.id = "12355677777";
        this.name = "Ben";
    }

    static getInstance() {
        if (!Me.instance) {
            // 使用static来确保Me类的唯一
            Me.instance = new Me();
        }
        return Me.instance;
    }
}

module.exports = {
    getInstance() {
        return Me.getInstance();
    }
};
```

test使用:

```js
const Me = require('./Me');

const me = Me.getInstance();
const me2 = Me.getInstance();

if (me === me2) {
    console.log("只有一个我");
} else {
    console.log("不一样的我");
}
```
